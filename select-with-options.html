<script>
    function createOption(parent, label, value ) {
        var option = document.createElement('option');
        option.textContent = label;
        option.value = value;
        parent.appendChild(option);
    }

    new Polymer({
        is: 'select-with-options',
        extends: 'select',
        properties: {
            options: { observer: '_renderOptions' },
            optionValue: { type: String },
            optionLabel: { type: String },
            defaultLabel: { type: String },
            defaultValue: { type: String }
        },
        _renderOptions: function() {
            while (this.firstChild) {
                this.removeChild(this.firstChild);
            }
            if ( this.defaultLabel ) {
                createOption( this, this.defaultLabel, this.defaultValue || '');
            }
            this.options.forEach( function( option ) {
                var label = this.optionLabel ? option[this.optionLabel] : option;
                var value = this.optionValue ? option[this.optionValue] : option;
                createOption( this, label, value);
            }, this );
        }
    });

</script>

